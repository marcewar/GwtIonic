/*!
 * (C) Ionic http://ionicframework.com - MIT License
 * Built with http://stenciljs.com
 */
const{h:t}=window.Ionic;import{domControllerAsync as e,now as s,pointerCoord as i}from"./chunk1.js";class a{constructor(){this.duration=300}statusTap(){return this.tap()}mockTap(){return this.tap()}tap(){return e(this.dom.read,()=>{const t=window.innerWidth,e=window.innerWidth,s=document.elementFromPoint(t/2,e/2);return s?s.closest("ion-scroll"):null}).then(([t])=>t.componentOnReady()).then(t=>e(this.dom.write,()=>t.scrollToTop(this.duration)))}static get is(){return"ion-status-tap"}static get properties(){return{dom:{context:"dom"},duration:{type:Number,attr:"duration"},mockTap:{method:!0}}}}class n{constructor(){this.lastTouch=10*-l,this.lastActivated=0,this.cancelled=!1,this.clearDefers=new WeakMap}onBodyClick(t){this.cancelled&&(t.preventDefault(),t.stopPropagation())}onTouchStart(t){this.lastTouch=s(t),this.pointerDown(t)}onTouchCancel(t){this.lastTouch=s(t),this.pointerUp(t)}onTouchEnd(t){this.lastTouch=s(t),this.pointerUp(t)}onMouseDown(t){const e=s(t)-l;this.lastTouch<e&&this.pointerDown(t)}onMouseUp(t){const e=s(t)-l;this.lastTouch<e&&this.pointerUp(t)}cancelActive(){clearTimeout(this.activeDefer),this.activatableEle&&(this.removeActivated(!1),this.activatableEle=null),this.cancelled=!0}pointerDown(t){this.activatableEle||(this.cancelled=!1,this.setActivatedElement(t.target.closest("a,button,[tappable]"),t))}pointerUp(t){this.setActivatedElement(null,t),this.cancelled&&t.cancelable&&t.preventDefault()}setActivatedElement(t,e){const s=this.activatableEle;if(t&&t===s)return;clearTimeout(this.activeDefer),this.activeDefer=null;const{x:a,y:n}=i(e);if(s){if(this.clearDefers.has(s))throw new Error("internal error");s.classList.contains(o)||this.addActivated(s,a,n),this.removeActivated(!0)}if(t){const e=this.clearDefers.get(t);e&&(clearTimeout(e),this.clearDefers.delete(t)),t.classList.remove(o),this.activeDefer=setTimeout(()=>{this.addActivated(t,a,n),this.activeDefer=null},c)}this.activatableEle=t}addActivated(t,e,s){this.lastActivated=Date.now(),t.classList.add(o);const i=new CustomEvent("ionActivated",{bubbles:!1,detail:{x:e,y:s}});t.dispatchEvent(i)}removeActivated(t){const e=this.activatableEle;if(!e)return;const s=r-Date.now()+this.lastActivated;if(t&&s>0){const t=setTimeout(()=>{e.classList.remove(o),this.clearDefers.delete(e)},r);this.clearDefers.set(e,t)}else e.classList.remove(o)}static get is(){return"ion-tap-click"}static get properties(){return{el:{elementRef:!0},enableListener:{context:"enableListener"},isServer:{context:"isServer"}}}}const o="activated",c=200,r=200,l=2500;export{a as IonStatusTap,n as IonTapClick};